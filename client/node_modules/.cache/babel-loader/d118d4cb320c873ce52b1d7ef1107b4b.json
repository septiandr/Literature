{"ast":null,"code":"import _extends from '@babel/runtime/helpers/extends';\nimport * as primitives from '@react-pdf/primitives';\nexport * from '@react-pdf/primitives';\nimport queue from 'queue';\nimport React, { useRef, useState, useEffect } from 'react';\nimport _asyncToGenerator from '@babel/runtime/helpers/asyncToGenerator';\nimport _regeneratorRuntime from '@babel/runtime/regenerator';\nimport BlobStream from 'blob-stream';\nimport FontStore from '@react-pdf/font';\nimport renderPDF from '@react-pdf/render';\nimport PDFDocument from '@react-pdf/pdfkit';\nimport layoutDocument from '@react-pdf/layout';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/objectWithoutPropertiesLoose';\nimport ReactFiberReconciler from 'react-reconciler';\nimport { unstable_scheduleCallback, unstable_cancelCallback } from 'scheduler';\n/* eslint-disable no-continue */\n\n/**\n * Checks if two sets of props are equal (recursively)\n *\n * @param {Object} props A\n * @param {Object} props B\n * @returns {Boolean} props equals?\n *\n */\n\nvar propsEqual = function propsEqual(a, b) {\n  var oldPropsKeys = Object.keys(a);\n  var newPropsKeys = Object.keys(b);\n\n  if (oldPropsKeys.length !== newPropsKeys.length) {\n    return false;\n  }\n\n  for (var i = 0; i < oldPropsKeys.length; i += 1) {\n    var propName = oldPropsKeys[i];\n\n    if (propName === 'render' && !a[propName] !== !b[propName]) {\n      return false;\n    }\n\n    if (propName !== 'children' && a[propName] !== b[propName]) {\n      if (typeof a[propName] === 'object' && typeof b[propName] === 'object' && propsEqual(a[propName], b[propName])) {\n        continue;\n      }\n\n      return false;\n    }\n\n    if (propName === 'children' && (typeof a[propName] === 'string' || typeof b[propName] === 'string')) {\n      return a[propName] === b[propName];\n    }\n  }\n\n  return true;\n};\n\nvar emptyObject = {};\n\nvar createRenderer = function createRenderer(_ref) {\n  var _ref$onChange = _ref.onChange,\n      onChange = _ref$onChange === void 0 ? function () {} : _ref$onChange;\n  return ReactFiberReconciler({\n    schedulePassiveEffects: unstable_scheduleCallback,\n    cancelPassiveEffects: unstable_cancelCallback,\n    supportsMutation: true,\n    isPrimaryRenderer: false,\n    warnsIfNotActing: false,\n    appendInitialChild: function appendInitialChild(parentInstance, child) {\n      parentInstance.children.push(child);\n    },\n    createInstance: function createInstance(type, _ref2) {\n      var style = _ref2.style;\n      _ref2.children;\n\n      var props = _objectWithoutPropertiesLoose(_ref2, [\"style\", \"children\"]);\n\n      return {\n        type: type,\n        box: {},\n        style: style || {},\n        props: props || {},\n        children: []\n      };\n    },\n    createTextInstance: function createTextInstance(text, rootContainerInstance) {\n      return {\n        type: 'TEXT_INSTANCE',\n        value: text\n      };\n    },\n    finalizeInitialChildren: function finalizeInitialChildren(element, type, props) {\n      return false;\n    },\n    getPublicInstance: function getPublicInstance(instance) {\n      return instance;\n    },\n    prepareForCommit: function prepareForCommit() {// Noop\n    },\n    clearContainer: function clearContainer() {// Noop\n    },\n    prepareUpdate: function prepareUpdate(element, type, oldProps, newProps) {\n      return !propsEqual(oldProps, newProps);\n    },\n    resetAfterCommit: onChange,\n    resetTextContent: function resetTextContent(element) {// Noop\n    },\n    getRootHostContext: function getRootHostContext() {\n      return emptyObject;\n    },\n    getChildHostContext: function getChildHostContext() {\n      return emptyObject;\n    },\n    shouldSetTextContent: function shouldSetTextContent(type, props) {\n      return false;\n    },\n    now: Date.now,\n    useSyncScheduling: true,\n    appendChild: function appendChild(parentInstance, child) {\n      parentInstance.children.push(child);\n    },\n    appendChildToContainer: function appendChildToContainer(parentInstance, child) {\n      if (parentInstance.type === 'ROOT') {\n        parentInstance.document = child;\n      } else {\n        parentInstance.children.push(child);\n      }\n    },\n    insertBefore: function insertBefore(parentInstance, child, beforeChild) {\n      var _parentInstance$child;\n\n      var index = (_parentInstance$child = parentInstance.children) === null || _parentInstance$child === void 0 ? void 0 : _parentInstance$child.indexOf(beforeChild);\n      if (index === undefined) return;\n      if (index !== -1 && child) parentInstance.children.splice(index, 0, child);\n    },\n    removeChild: function removeChild(parentInstance, child) {\n      var _parentInstance$child2;\n\n      var index = (_parentInstance$child2 = parentInstance.children) === null || _parentInstance$child2 === void 0 ? void 0 : _parentInstance$child2.indexOf(child);\n      if (index === undefined) return;\n      if (index !== -1) parentInstance.children.splice(index, 1);\n    },\n    removeChildFromContainer: function removeChildFromContainer(parentInstance, child) {\n      var _parentInstance$child3;\n\n      var index = (_parentInstance$child3 = parentInstance.children) === null || _parentInstance$child3 === void 0 ? void 0 : _parentInstance$child3.indexOf(child);\n      if (index === undefined) return;\n      if (index !== -1) parentInstance.children.splice(index, 1);\n    },\n    commitTextUpdate: function commitTextUpdate(textInstance, oldText, newText) {\n      textInstance.value = newText;\n    },\n    commitUpdate: function commitUpdate(instance, updatePayload, type, oldProps, newProps) {\n      var style = newProps.style,\n          props = _objectWithoutPropertiesLoose(newProps, [\"style\"]);\n\n      instance.props = props;\n      instance.style = style;\n    }\n  });\n};\n\nvar version = \"2.0.21\";\nvar fontStore = new FontStore(); // We must keep a single renderer instance, otherwise React will complain\n\nvar renderer; // The pdf instance acts as an event emitter for DOM usage.\n// We only want to trigger an update when PDF content changes\n\nvar events = {};\n\nvar pdf = function pdf(initialValue) {\n  var onChange = function onChange() {\n    var _events$change;\n\n    var listeners = ((_events$change = events.change) === null || _events$change === void 0 ? void 0 : _events$change.slice()) || [];\n\n    for (var i = 0; i < listeners.length; i += 1) {\n      listeners[i]();\n    }\n  };\n\n  var container = {\n    type: 'ROOT',\n    document: null\n  };\n  renderer = renderer || createRenderer({\n    onChange: onChange\n  });\n  var mountNode = renderer.createContainer(container);\n\n  var updateContainer = function updateContainer(doc) {\n    renderer.updateContainer(doc, mountNode, null);\n  };\n\n  if (initialValue) updateContainer(initialValue);\n\n  var render = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(compress) {\n      var props, pdfVersion, language, ctx, layout;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (compress === void 0) {\n                compress = true;\n              }\n\n              props = container.document.props || {};\n              pdfVersion = props.pdfVersion, language = props.language;\n              ctx = new PDFDocument({\n                compress: compress,\n                pdfVersion: pdfVersion,\n                lang: language,\n                displayTitle: true,\n                autoFirstPage: false\n              });\n              _context.next = 6;\n              return layoutDocument(container.document, fontStore);\n\n            case 6:\n              layout = _context.sent;\n              return _context.abrupt(\"return\", renderPDF(ctx, layout));\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function render(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var callOnRender = function callOnRender(params) {\n    if (params === void 0) {\n      params = {};\n    }\n\n    if (container.document.props.onRender) {\n      container.document.props.onRender(params);\n    }\n  };\n\n  var toBlob = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var instance, stream;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return render();\n\n            case 2:\n              instance = _context2.sent;\n              stream = instance.pipe(BlobStream());\n              return _context2.abrupt(\"return\", new Promise(function (resolve, reject) {\n                stream.on('finish', function () {\n                  try {\n                    var blob = stream.toBlob('application/pdf');\n                    callOnRender({\n                      blob: blob\n                    });\n                    resolve(blob);\n                  } catch (error) {\n                    reject(error);\n                  }\n                });\n                stream.on('error', reject);\n              }));\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function toBlob() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var toBuffer = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              callOnRender();\n              return _context3.abrupt(\"return\", render());\n\n            case 2:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function toBuffer() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var toString = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var result, instance;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              result = '';\n              _context4.next = 3;\n              return render(false);\n\n            case 3:\n              instance = _context4.sent;\n              return _context4.abrupt(\"return\", new Promise(function (resolve, reject) {\n                try {\n                  instance.on('data', function (buffer) {\n                    result += buffer;\n                  });\n                  instance.on('end', function () {\n                    callOnRender();\n                    resolve(result);\n                  });\n                } catch (error) {\n                  reject(error);\n                }\n              }));\n\n            case 5:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function toString() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var on = function on(event, listener) {\n    if (!events[event]) events[event] = [];\n    events[event].push(listener);\n  };\n\n  var removeListener = function removeListener(event, listener) {\n    if (!events[event]) return;\n    var idx = events[event].indexOf(listener);\n    if (idx > -1) events[event].splice(idx, 1);\n  };\n\n  return {\n    on: on,\n    container: container,\n    toBlob: toBlob,\n    toBuffer: toBuffer,\n    toString: toString,\n    removeListener: removeListener,\n    updateContainer: updateContainer\n  };\n};\n\nvar Font = fontStore;\nvar StyleSheet = {\n  create: function create(s) {\n    return s;\n  }\n};\n\nvar usePDF = function usePDF(_ref) {\n  var document = _ref.document;\n  var pdfInstance = useRef(null);\n\n  var _useState = useState({\n    url: null,\n    blob: null,\n    error: null,\n    loading: false\n  }),\n      state = _useState[0],\n      setState = _useState[1]; // Setup rendering queue\n\n\n  useEffect(function () {\n    var renderQueue = queue({\n      autostart: true,\n      concurrency: 1\n    });\n\n    var queueDocumentRender = function queueDocumentRender() {\n      setState(function (prev) {\n        return _extends({}, prev, {\n          loading: true\n        });\n      });\n      renderQueue.splice(0, renderQueue.length, function () {\n        return state.error ? Promise.resolve() : pdfInstance.current.toBlob();\n      });\n    };\n\n    var onRenderFailed = function onRenderFailed(error) {\n      console.error(error);\n      setState(function (prev) {\n        return _extends({}, prev, {\n          error: error\n        });\n      });\n    };\n\n    var onRenderSuccessful = function onRenderSuccessful(blob) {\n      setState({\n        blob: blob,\n        error: null,\n        loading: false,\n        url: URL.createObjectURL(blob)\n      });\n    };\n\n    pdfInstance.current = pdf();\n    pdfInstance.current.on('change', queueDocumentRender);\n    pdfInstance.current.updateContainer(document);\n    renderQueue.on('error', onRenderFailed);\n    renderQueue.on('success', onRenderSuccessful);\n    return function () {\n      renderQueue.end();\n      pdfInstance.current.removeListener('change', queueDocumentRender);\n    };\n  }, []); // Revoke old unused url instances\n\n  useEffect(function () {\n    return function () {\n      if (state.url) {\n        URL.revokeObjectURL(state.url);\n      }\n    };\n  }, [state.url]);\n\n  var update = function update() {\n    pdfInstance.current.updateContainer(document);\n  };\n\n  return [state, update];\n};\n\nvar PDFViewer = function PDFViewer(_ref) {\n  var title = _ref.title,\n      style = _ref.style,\n      className = _ref.className,\n      children = _ref.children,\n      innerRef = _ref.innerRef,\n      _ref$showToolbar = _ref.showToolbar,\n      showToolbar = _ref$showToolbar === void 0 ? true : _ref$showToolbar,\n      props = _objectWithoutPropertiesLoose(_ref, [\"title\", \"style\", \"className\", \"children\", \"innerRef\", \"showToolbar\"]);\n\n  var _usePDF = usePDF({\n    document: children\n  }),\n      instance = _usePDF[0],\n      updateInstance = _usePDF[1];\n\n  useEffect(updateInstance, [children]);\n  var src = instance.url ? instance.url + \"#toolbar=\" + (showToolbar ? 1 : 0) : null;\n  return /*#__PURE__*/React.createElement(\"iframe\", _extends({\n    src: src,\n    title: title,\n    ref: innerRef,\n    style: style,\n    className: className\n  }, props));\n};\n/* eslint-disable no-console */\n\n\nvar BlobProvider = function BlobProvider(_ref) {\n  var doc = _ref.document,\n      children = _ref.children;\n\n  var _usePDF = usePDF({\n    document: doc\n  }),\n      instance = _usePDF[0],\n      updateInstance = _usePDF[1];\n\n  useEffect(updateInstance, [doc]);\n\n  if (!doc) {\n    console.warn('You should pass a valid document to BlobProvider');\n    return null;\n  }\n\n  return children(instance);\n};\n/* eslint-disable no-console */\n\n\nvar PDFDownloadLink = function PDFDownloadLink(_ref) {\n  var style = _ref.style,\n      children = _ref.children,\n      className = _ref.className,\n      doc = _ref.document,\n      _ref$fileName = _ref.fileName,\n      fileName = _ref$fileName === void 0 ? 'document.pdf' : _ref$fileName;\n\n  var _usePDF = usePDF({\n    document: doc\n  }),\n      instance = _usePDF[0],\n      updateInstance = _usePDF[1];\n\n  useEffect(updateInstance, [children]);\n\n  if (!doc) {\n    console.warn('You should pass a valid document to PDFDownloadLink');\n    return null;\n  }\n\n  var handleDownloadIE = function handleDownloadIE() {\n    if (window.navigator.msSaveBlob) {\n      // IE\n      window.navigator.msSaveBlob(instance.blob, fileName);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"a\", {\n    style: style,\n    href: instance.url,\n    download: fileName,\n    className: className,\n    onClick: handleDownloadIE\n  }, typeof children === 'function' ? children(instance) : children);\n};\n\nvar throwEnvironmentError = function throwEnvironmentError(name) {\n  throw new Error(name + \" is a Node specific API. You're either using this method in a browser, or your bundler is not loading react-pdf from the appropriate web build.\");\n};\n\nvar renderToStream = function renderToStream() {\n  throwEnvironmentError('renderToStream');\n};\n\nvar renderToString = function renderToString() {\n  throwEnvironmentError('renderToString');\n};\n\nvar renderToFile = function renderToFile() {\n  throwEnvironmentError('renderToFile');\n};\n\nvar render = function render() {\n  throwEnvironmentError('render');\n};\n\nvar index = _extends({\n  pdf: pdf,\n  usePDF: usePDF,\n  Font: Font,\n  version: version,\n  StyleSheet: StyleSheet,\n  PDFViewer: PDFViewer,\n  BlobProvider: BlobProvider,\n  PDFDownloadLink: PDFDownloadLink,\n  renderToStream: renderToStream,\n  renderToString: renderToString,\n  renderToFile: renderToFile,\n  render: render\n}, primitives);\n\nexport default index;\nexport { BlobProvider, Font, PDFDownloadLink, PDFViewer, StyleSheet, createRenderer, pdf, render, renderToFile, renderToStream, renderToString, usePDF, version };","map":{"version":3,"sources":["../src/utils/propsEqual.js","../src/renderer.js","../src/index.js","../src/dom/usePDF.js","../src/dom/PDFViewer.js","../src/dom/BlobProvider.js","../src/dom/PDFDownloadLink.js","../src/dom/index.js"],"names":["propsEqual","oldPropsKeys","Object","newPropsKeys","i","propName","a","b","emptyObject","createRenderer","onChange","ReactFiberReconciler","schedulePassiveEffects","cancelPassiveEffects","supportsMutation","isPrimaryRenderer","warnsIfNotActing","appendInitialChild","parentInstance","createInstance","style","children","props","type","box","createTextInstance","value","text","finalizeInitialChildren","getPublicInstance","prepareForCommit","clearContainer","prepareUpdate","resetAfterCommit","resetTextContent","getRootHostContext","getChildHostContext","shouldSetTextContent","now","Date","useSyncScheduling","appendChild","appendChildToContainer","insertBefore","index","removeChild","removeChildFromContainer","commitTextUpdate","textInstance","commitUpdate","newProps","instance","fontStore","events","pdf","listeners","container","document","renderer","mountNode","updateContainer","render","compress","pdfVersion","language","ctx","lang","displayTitle","autoFirstPage","layout","layoutDocument","renderPDF","callOnRender","params","toBlob","stream","BlobStream","blob","resolve","reject","toBuffer","toString","result","on","removeListener","idx","Font","StyleSheet","create","usePDF","pdfInstance","useRef","state","setState","useState","url","error","loading","useEffect","renderQueue","queue","autostart","concurrency","queueDocumentRender","Promise","onRenderFailed","console","onRenderSuccessful","URL","update","PDFViewer","title","className","innerRef","showToolbar","updateInstance","src","BlobProvider","doc","PDFDownloadLink","fileName","handleDownloadIE","window","throwEnvironmentError","name","renderToStream","renderToString","renderToFile","version"],"mappings":"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","sourcesContent":["/* eslint-disable no-continue */\n\n/**\n * Checks if two sets of props are equal (recursively)\n *\n * @param {Object} props A\n * @param {Object} props B\n * @returns {Boolean} props equals?\n *\n */\nconst propsEqual = (a, b) => {\n  const oldPropsKeys = Object.keys(a);\n  const newPropsKeys = Object.keys(b);\n\n  if (oldPropsKeys.length !== newPropsKeys.length) {\n    return false;\n  }\n\n  for (let i = 0; i < oldPropsKeys.length; i += 1) {\n    const propName = oldPropsKeys[i];\n\n    if (propName === 'render' && !a[propName] !== !b[propName]) {\n      return false;\n    }\n\n    if (propName !== 'children' && a[propName] !== b[propName]) {\n      if (\n        typeof a[propName] === 'object' &&\n        typeof b[propName] === 'object' &&\n        propsEqual(a[propName], b[propName])\n      ) {\n        continue;\n      }\n\n      return false;\n    }\n\n    if (\n      propName === 'children' &&\n      (typeof a[propName] === 'string' || typeof b[propName] === 'string')\n    ) {\n      return a[propName] === b[propName];\n    }\n  }\n\n  return true;\n};\n\nexport default propsEqual;\n","/* eslint-disable no-unused-vars */\n/* eslint-disable no-param-reassign */\n\nimport ReactFiberReconciler from 'react-reconciler';\nimport {\n  unstable_scheduleCallback as schedulePassiveEffects,\n  unstable_cancelCallback as cancelPassiveEffects,\n} from 'scheduler';\n\nimport propsEqual from './utils/propsEqual';\n\nconst emptyObject = {};\n\nconst createRenderer = ({ onChange = () => {} }) => {\n  return ReactFiberReconciler({\n    schedulePassiveEffects,\n\n    cancelPassiveEffects,\n\n    supportsMutation: true,\n\n    isPrimaryRenderer: false,\n\n    warnsIfNotActing: false,\n\n    appendInitialChild(parentInstance, child) {\n      parentInstance.children.push(child);\n    },\n\n    createInstance(type, { style, children, ...props }) {\n      return {\n        type,\n        box: {},\n        style: style || {},\n        props: props || {},\n        children: [],\n      };\n    },\n\n    createTextInstance(text, rootContainerInstance) {\n      return { type: 'TEXT_INSTANCE', value: text };\n    },\n\n    finalizeInitialChildren(element, type, props) {\n      return false;\n    },\n\n    getPublicInstance(instance) {\n      return instance;\n    },\n\n    prepareForCommit() {\n      // Noop\n    },\n\n    clearContainer() {\n      // Noop\n    },\n\n    prepareUpdate(element, type, oldProps, newProps) {\n      return !propsEqual(oldProps, newProps);\n    },\n\n    resetAfterCommit: onChange,\n\n    resetTextContent(element) {\n      // Noop\n    },\n\n    getRootHostContext() {\n      return emptyObject;\n    },\n\n    getChildHostContext() {\n      return emptyObject;\n    },\n\n    shouldSetTextContent(type, props) {\n      return false;\n    },\n\n    now: Date.now,\n\n    useSyncScheduling: true,\n\n    appendChild(parentInstance, child) {\n      parentInstance.children.push(child);\n    },\n\n    appendChildToContainer(parentInstance, child) {\n      if (parentInstance.type === 'ROOT') {\n        parentInstance.document = child;\n      } else {\n        parentInstance.children.push(child);\n      }\n    },\n\n    insertBefore(parentInstance, child, beforeChild) {\n      const index = parentInstance.children?.indexOf(beforeChild);\n\n      if (index === undefined) return;\n\n      if (index !== -1 && child)\n        parentInstance.children.splice(index, 0, child);\n    },\n\n    removeChild(parentInstance, child) {\n      const index = parentInstance.children?.indexOf(child);\n\n      if (index === undefined) return;\n\n      if (index !== -1) parentInstance.children.splice(index, 1);\n    },\n\n    removeChildFromContainer(parentInstance, child) {\n      const index = parentInstance.children?.indexOf(child);\n\n      if (index === undefined) return;\n\n      if (index !== -1) parentInstance.children.splice(index, 1);\n    },\n\n    commitTextUpdate(textInstance, oldText, newText) {\n      textInstance.value = newText;\n    },\n\n    commitUpdate(instance, updatePayload, type, oldProps, newProps) {\n      const { style, ...props } = newProps;\n      instance.props = props;\n      instance.style = style;\n    },\n  });\n};\n\nexport default createRenderer;\n","import BlobStream from 'blob-stream';\nimport FontStore from '@react-pdf/font';\nimport renderPDF from '@react-pdf/render';\nimport PDFDocument from '@react-pdf/pdfkit';\nimport layoutDocument from '@react-pdf/layout';\n\nimport createRenderer from './renderer';\nimport { version } from '../package.json';\n\nconst fontStore = new FontStore();\n\n// We must keep a single renderer instance, otherwise React will complain\nlet renderer;\n\n// The pdf instance acts as an event emitter for DOM usage.\n// We only want to trigger an update when PDF content changes\nconst events = {};\n\nconst pdf = initialValue => {\n  const onChange = () => {\n    const listeners = events.change?.slice() || [];\n    for (let i = 0; i < listeners.length; i += 1) listeners[i]();\n  };\n\n  const container = { type: 'ROOT', document: null };\n  renderer = renderer || createRenderer({ onChange });\n  const mountNode = renderer.createContainer(container);\n\n  const updateContainer = doc => {\n    renderer.updateContainer(doc, mountNode, null);\n  };\n\n  if (initialValue) updateContainer(initialValue);\n\n  const render = async (compress = true) => {\n    const props = container.document.props || {};\n    const { pdfVersion, language } = props;\n\n    const ctx = new PDFDocument({\n      compress,\n      pdfVersion,\n      lang: language,\n      displayTitle: true,\n      autoFirstPage: false,\n    });\n\n    const layout = await layoutDocument(container.document, fontStore);\n\n    return renderPDF(ctx, layout);\n  };\n\n  const callOnRender = (params = {}) => {\n    if (container.document.props.onRender) {\n      container.document.props.onRender(params);\n    }\n  };\n\n  const toBlob = async () => {\n    const instance = await render();\n    const stream = instance.pipe(BlobStream());\n\n    return new Promise((resolve, reject) => {\n      stream.on('finish', () => {\n        try {\n          const blob = stream.toBlob('application/pdf');\n          callOnRender({ blob });\n          resolve(blob);\n        } catch (error) {\n          reject(error);\n        }\n      });\n\n      stream.on('error', reject);\n    });\n  };\n\n  const toBuffer = async () => {\n    callOnRender();\n    return render();\n  };\n\n  const toString = async () => {\n    let result = '';\n    const instance = await render(false); // For some reason, when rendering to string if compress=true the document is blank\n\n    return new Promise((resolve, reject) => {\n      try {\n        instance.on('data', buffer => {\n          result += buffer;\n        });\n\n        instance.on('end', () => {\n          callOnRender();\n          resolve(result);\n        });\n      } catch (error) {\n        reject(error);\n      }\n    });\n  };\n\n  const on = (event, listener) => {\n    if (!events[event]) events[event] = [];\n    events[event].push(listener);\n  };\n\n  const removeListener = (event, listener) => {\n    if (!events[event]) return;\n    const idx = events[event].indexOf(listener);\n    if (idx > -1) events[event].splice(idx, 1);\n  };\n\n  return {\n    on,\n    container,\n    toBlob,\n    toBuffer,\n    toString,\n    removeListener,\n    updateContainer,\n  };\n};\n\nconst Font = fontStore;\n\nconst StyleSheet = {\n  create: s => s,\n};\n\nexport { version, Font, StyleSheet, pdf, createRenderer };\n","/* eslint-disable no-console */\n\nimport queue from 'queue';\nimport { useState, useRef, useEffect } from 'react';\n\nimport { pdf } from '../index';\n\nexport const usePDF = ({ document }) => {\n  const pdfInstance = useRef(null);\n\n  const [state, setState] = useState({\n    url: null,\n    blob: null,\n    error: null,\n    loading: false,\n  });\n\n  // Setup rendering queue\n  useEffect(() => {\n    const renderQueue = queue({ autostart: true, concurrency: 1 });\n\n    const queueDocumentRender = () => {\n      setState(prev => ({ ...prev, loading: true }));\n\n      renderQueue.splice(0, renderQueue.length, () =>\n        state.error ? Promise.resolve() : pdfInstance.current.toBlob(),\n      );\n    };\n\n    const onRenderFailed = error => {\n      console.error(error);\n      setState(prev => ({ ...prev, error }));\n    };\n\n    const onRenderSuccessful = blob => {\n      setState({\n        blob,\n        error: null,\n        loading: false,\n        url: URL.createObjectURL(blob),\n      });\n    };\n\n    pdfInstance.current = pdf();\n    pdfInstance.current.on('change', queueDocumentRender);\n    pdfInstance.current.updateContainer(document);\n\n    renderQueue.on('error', onRenderFailed);\n    renderQueue.on('success', onRenderSuccessful);\n\n    return () => {\n      renderQueue.end();\n      pdfInstance.current.removeListener('change', queueDocumentRender);\n    };\n  }, []);\n\n  // Revoke old unused url instances\n  useEffect(() => {\n    return () => {\n      if (state.url) {\n        URL.revokeObjectURL(state.url);\n      }\n    };\n  }, [state.url]);\n\n  const update = () => {\n    pdfInstance.current.updateContainer(document);\n  };\n\n  return [state, update];\n};\n\nexport default usePDF;\n","/* eslint-disable no-console */\n/* eslint-disable react/jsx-props-no-spreading */\n\nimport React, { useEffect } from 'react';\n\nimport usePDF from './usePDF';\n\nexport const PDFViewer = ({\n  title,\n  style,\n  className,\n  children,\n  innerRef,\n  showToolbar = true,\n  ...props\n}) => {\n  const [instance, updateInstance] = usePDF({ document: children });\n\n  useEffect(updateInstance, [children]);\n\n  const src = instance.url\n    ? `${instance.url}#toolbar=${showToolbar ? 1 : 0}`\n    : null;\n\n  return (\n    <iframe\n      src={src}\n      title={title}\n      ref={innerRef}\n      style={style}\n      className={className}\n      {...props}\n    />\n  );\n};\n\nexport default PDFViewer;\n","/* eslint-disable no-console */\n\nimport { useEffect } from 'react';\n\nimport usePDF from './usePDF';\n\nexport const BlobProvider = ({ document: doc, children }) => {\n  const [instance, updateInstance] = usePDF({ document: doc });\n\n  useEffect(updateInstance, [doc]);\n\n  if (!doc) {\n    console.warn('You should pass a valid document to BlobProvider');\n    return null;\n  }\n\n  return children(instance);\n};\n\nexport default BlobProvider;\n","/* eslint-disable no-console */\n\nimport React, { useEffect } from 'react';\n\nimport usePDF from './usePDF';\n\nexport const PDFDownloadLink = ({\n  style,\n  children,\n  className,\n  document: doc,\n  fileName = 'document.pdf',\n}) => {\n  const [instance, updateInstance] = usePDF({ document: doc });\n\n  useEffect(updateInstance, [children]);\n\n  if (!doc) {\n    console.warn('You should pass a valid document to PDFDownloadLink');\n    return null;\n  }\n\n  const handleDownloadIE = () => {\n    if (window.navigator.msSaveBlob) {\n      // IE\n      window.navigator.msSaveBlob(instance.blob, fileName);\n    }\n  };\n\n  return (\n    <a\n      style={style}\n      href={instance.url}\n      download={fileName}\n      className={className}\n      onClick={handleDownloadIE}\n    >\n      {typeof children === 'function' ? children(instance) : children}\n    </a>\n  );\n};\n\nexport default PDFDownloadLink;\n","import * as primitives from '@react-pdf/primitives';\n\nimport usePDF from './usePDF';\nimport PDFViewer from './PDFViewer';\nimport BlobProvider from './BlobProvider';\nimport PDFDownloadLink from './PDFDownloadLink';\nimport { pdf, version, Font, StyleSheet } from '../index';\n\nconst throwEnvironmentError = name => {\n  throw new Error(\n    `${name} is a Node specific API. You're either using this method in a browser, or your bundler is not loading react-pdf from the appropriate web build.`,\n  );\n};\n\nexport const renderToStream = () => {\n  throwEnvironmentError('renderToStream');\n};\n\nexport const renderToString = () => {\n  throwEnvironmentError('renderToString');\n};\n\nexport const renderToFile = () => {\n  throwEnvironmentError('renderToFile');\n};\n\nexport const render = () => {\n  throwEnvironmentError('render');\n};\n\nexport * from '../index';\n\nexport * from './usePDF';\n\nexport * from './PDFViewer';\n\nexport * from './BlobProvider';\n\nexport * from './PDFDownloadLink';\n\nexport * from '@react-pdf/primitives';\n\nexport default {\n  pdf,\n  usePDF,\n  Font,\n  version,\n  StyleSheet,\n  PDFViewer,\n  BlobProvider,\n  PDFDownloadLink,\n  renderToStream,\n  renderToString,\n  renderToFile,\n  render,\n  ...primitives,\n};\n"]},"metadata":{},"sourceType":"module"}